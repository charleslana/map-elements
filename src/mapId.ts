import { getBooleanStorage, saveBooleanStorage } from './data/localStorage';
import { getHTMLInputElementById } from './utils/utils';
import { IMapId } from './interface/IMapId';
import { TabSingleton } from './singleton/TabSingleton';

export const initMapId = async (): Promise<void> => {
  listenSwitch();
  listenDOM();
  await formMapId();
};

const switchMarkingsId = 'switch-markings';
const switchInfoId = 'switch-info';
const switchMarkingsKey = 'switchMarkings';
const switchInfoKey = 'switchInfo';

const formMapId = async (): Promise<void> => {
  const mapIdForm = document.getElementById('mapId');
  if (mapIdForm) {
    mapIdForm.addEventListener('submit', async event => {
      event.preventDefault();
      await executeMapId();
    });
  }
};

const executeMapId = async (): Promise<void> => {
  const switchMarkings = getHTMLInputElementById(switchMarkingsId);
  const switchInfo = getHTMLInputElementById(switchInfoId);
  const tab = await TabSingleton.getInstance();
  if (tab && tab.id && switchMarkings && switchInfo) {
    const { id } = tab;
    const markingsChecked = switchMarkings.checked;
    const infoChecked = switchInfo.checked;
    executeChromeScript(id, { markingsChecked, infoChecked });
  }
};

const executeChromeScript = (tabId: number, mapId: IMapId): void => {
  chrome.scripting.executeScript(
    {
      target: {
        tabId,
      },
      func: getIds,
      args: [mapId],
    },
    ([count]) => {
      const totalIds = document.getElementById('totalIds');
      if (totalIds) {
        totalIds.textContent = `Total de ID's: ${count.result}`;
        totalIds.classList.remove('hidden');
      }
    }
  );
};

const getIds = (mapId: IMapId): number => {
  // remove markings and modal
  const generatorMarkings = document.querySelectorAll('.map-generator-markings');
  generatorMarkings.forEach(parent => {
    parent.replaceWith(...parent.childNodes);
  });
  const modal = document.querySelector('.map-generator-modal');
  if (modal && modal.parentNode) {
    modal.parentNode.removeChild(modal);
  }
  // create modal
  const bodyDiv = document.createElement('div');
  bodyDiv.style.display = 'none';
  bodyDiv.style.position = 'fixed';
  bodyDiv.style.top = '50%';
  bodyDiv.style.left = '50%';
  bodyDiv.style.transform = 'translate(-50%, -50%)';
  bodyDiv.style.backgroundColor = 'white';
  bodyDiv.style.border = '1px solid #ccc';
  bodyDiv.style.padding = '20px';
  bodyDiv.style.zIndex = '99999';
  bodyDiv.className = 'map-generator-modal';
  bodyDiv.style.color = 'black';
  document.body.insertAdjacentElement('afterend', bodyDiv);
  // create markings
  const ids = document.querySelectorAll('[id]');
  if (mapId.markingsChecked) {
    ids.forEach(id => {
      const div = document.createElement('div');
      div.className = 'map-generator-markings';
      div.style.border = '5px solid red';
      div.style.position = 'relative';
      if (id.parentNode) {
        id.parentNode.insertBefore(div, id);
      }
      div.appendChild(id);
      // create info icon
      if (mapId.infoChecked) {
        const icon = document.createElement('img');
        icon.src =
          'data:image/png;base64,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';
        icon.className = 'map-generator-markings';
        icon.style.width = '32px';
        icon.style.position = 'absolute';
        icon.style.top = '-10px';
        icon.style.right = '-20px';
        icon.style.transform = 'translateY(-50%)';
        icon.style.cursor = 'pointer';
        icon.style.zIndex = '1';
        // click icon
        icon.addEventListener('click', () => {
          const modal = document.querySelector('.map-generator-modal') as HTMLDivElement | null;
          if (modal) {
            modal.style.display = 'block';
            modal.textContent = `ID: #${id.getAttribute('id')}`;
            // create close icon
            const closeIcon = document.createElement('img');
            closeIcon.src =
              'data:image/png;base64,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';
            closeIcon.className = 'map-generator-markings';
            closeIcon.style.width = '32px';
            closeIcon.style.position = 'absolute';
            closeIcon.style.top = '-10px';
            closeIcon.style.right = '-20px';
            closeIcon.style.transform = 'translateY(-50%)';
            closeIcon.style.cursor = 'pointer';
            closeIcon.style.zIndex = '2';
            closeIcon.addEventListener('click', () => {
              const modal = document.querySelector('.map-generator-modal') as HTMLDivElement | null;
              if (modal) {
                modal.style.display = 'none';
              }
            });
            modal.appendChild(closeIcon);
          }
        });
        div.appendChild(icon);
      }
    });
  }
  // get length
  return ids.length;
};

const listenSwitch = (): void => {
  document.addEventListener('change', event => {
    const switchMarkings = getHTMLInputElementById(switchMarkingsId);
    const switchInfo = getHTMLInputElementById(switchInfoId);
    if (switchMarkings && event.target === switchMarkings) {
      saveBooleanStorage(switchMarkingsKey, switchMarkings.checked);
      if (!switchMarkings.checked && switchInfo) {
        switchInfo.checked = false;
        saveBooleanStorage(switchInfoKey, switchInfo.checked);
      }
    }
    if (switchInfo && event.target === switchInfo) {
      if (switchMarkings && !switchMarkings.checked) {
        switchInfo.checked = false;
      }
      saveBooleanStorage(switchInfoKey, switchInfo.checked);
    }
  });
};

const listenDOM = (): void => {
  document.addEventListener('DOMContentLoaded', () => {
    const switchMarkings = getHTMLInputElementById(switchMarkingsId);
    if (switchMarkings) {
      switchMarkings.checked = getBooleanStorage(switchMarkingsKey);
    }
    const switchInfo = getHTMLInputElementById(switchInfoId);
    if (switchInfo) {
      switchInfo.checked = getBooleanStorage(switchInfoKey);
    }
  });
};
